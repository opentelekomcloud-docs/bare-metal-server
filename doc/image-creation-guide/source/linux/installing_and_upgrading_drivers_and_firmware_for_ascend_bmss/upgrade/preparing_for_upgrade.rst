:original_name: en-us_topic_0000001117096650.html

.. _en-us_topic_0000001117096650:

Preparing for Upgrade
=====================

**Performing Pre-upgrade Check**

Perform a check according to :ref:`Table 1 <en-us_topic_0000001117096650__en-us_topic_0000001163414151_table423318144616>` and record the check results.

.. _en-us_topic_0000001117096650__en-us_topic_0000001163414151_table423318144616:

.. table:: **Table 1** Pre-upgrade checklist

   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------+
   | No.                   | Check Item            | Checklist                                                                                                |
   +=======================+=======================+==========================================================================================================+
   | 1                     | Software version      | #. Check and record the current version of the Atlas 800 (model 9000) training server.                   |
   |                       |                       | #. Determine the target version.                                                                         |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------+
   | 2                     | System status         | Check alarms of the Atlas 800 (model 9000) training server.                                              |
   |                       |                       |                                                                                                          |
   |                       |                       | -  If no active alarm exists, perform the upgrade without additional actions.                            |
   |                       |                       | -  If there are active alarms, contact technical support to clear the alarms. Then, perform the upgrade. |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------+

:ref:`Table 2 <en-us_topic_0000001117096650__en-us_topic_0000001163414151_table8256314167>` lists the driver/firmware versions supported by different NPUs.

.. _en-us_topic_0000001117096650__en-us_topic_0000001163414151_table8256314167:

.. table:: **Table 2** Compatible software versions

   ================ =======================
   NPU              Driver/Firmware Version
   ================ =======================
   Ascend A         20.0.0, 20.1.0, 20.2.0
   Ascend B         20.0.0, 20.1.0, 20.2.0
   Ascend Pro A     20.0.0, 20.1.0, 20.2.0
   Ascend Pro B     20.2.0.SPC300
   Ascend Premium A 20.2.0.SPC300
   ================ =======================

**Obtaining Upgrade Packages**

To obtain upgrade packages, perform the following steps:

1. Visit https://support.huawei.com/enterprise/en/ascend-computing/a800-9000-pid-250702818/software.

2. Choose a BMS version **A800-9000** *x.x.x*.

Determine the driver/firmware version by referring to `CANN Version Mapping <https://support.huawei.com/enterprise/en/ascend-computing/cann-pid-251168373/software>`__.

Download upgrade packages to your local PC. :ref:`Table 3 <en-us_topic_0000001117096650__en-us_topic_0000001163414151_table178103441981>` describes upgrade package details.

.. note::

   -  *x.x.x* indicates the software version.
   -  The **A800-9000-npu-driver\_**\ *x.x.x*\ **\_linux-aarch64.run** package is compatible with all OSs.

.. _en-us_topic_0000001117096650__en-us_topic_0000001163414151_table178103441981:

.. table:: **Table 3** Driver and firmware upgrade packages

   +--------------------------+------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------+----------------------------------+
   | BMS                      | OS                                                                           | Kernel                                                                                                                                                                                                                                                                                                  | Driver Package                                             | Firmware Package                 |
   +==========================+==============================================================================+=========================================================================================================================================================================================================================================================================================================+============================================================+==================================+
   | Atlas 800 9000 (AArch64) | EulerOS 2.8                                                                  | 4.19.36-vhulk1907.1.0.h475                                                                                                                                                                                                                                                                              | A800-9000-npu-driver\_\ *x.x.x*\ \_euleros2.8-aarch64.run  | A800-9000-npu-firmware_x.x.x.run |
   +--------------------------+------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------+----------------------------------+
   |                          | CentOS7.6                                                                    | 4.14.0-115.el7a.0.1.aarch64                                                                                                                                                                                                                                                                             | A800-9000-npu-driver\_\ *x.x.x*\ \_centos7.6-aarch64-.run  |                                  |
   +--------------------------+------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------+----------------------------------+
   |                          | Ubuntu18.04                                                                  | 4.15.0-45-generic                                                                                                                                                                                                                                                                                       | A800-9000-npu-driver\_\ *x.x.x*\ \_ubuntu18.04-aarch64.run |                                  |
   |                          |                                                                              |                                                                                                                                                                                                                                                                                                         |                                                            |                                  |
   |                          |                                                                              | Note:                                                                                                                                                                                                                                                                                                   |                                                            |                                  |
   |                          |                                                                              |                                                                                                                                                                                                                                                                                                         |                                                            |                                  |
   |                          |                                                                              | If the kernel does not match the OS, install DKMS to compile the driver source code before you upgrade the driver. For details about how to install DKMS, see `Driver Source Code Compilation <https://support.huawei.com/enterprise/en/doc/EDOC1100150910/9ce92ba0/driver-source-code-compilation>`__. |                                                            |                                  |
   +--------------------------+------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------+----------------------------------+
   |                          | CentOS8.2                                                                    | 4.18.X                                                                                                                                                                                                                                                                                                  | A800-9000-npu-driver\_\ *x.x.x*\ \_linux-aarch64.run       |                                  |
   |                          |                                                                              |                                                                                                                                                                                                                                                                                                         |                                                            |                                  |
   |                          |                                                                              | Note:                                                                                                                                                                                                                                                                                                   |                                                            |                                  |
   |                          |                                                                              |                                                                                                                                                                                                                                                                                                         |                                                            |                                  |
   |                          |                                                                              | The kernel can be upgraded to 5.6.14.                                                                                                                                                                                                                                                                   |                                                            |                                  |
   +--------------------------+------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------+----------------------------------+
   |                          | BC_Linux 7.6                                                                 | 4.19                                                                                                                                                                                                                                                                                                    | A800-9000-npu-driver\_\ *x.x.x*\ \_centos7.6-aarch64-.run  |                                  |
   |                          |                                                                              |                                                                                                                                                                                                                                                                                                         |                                                            |                                  |
   |                          |                                                                              |                                                                                                                                                                                                                                                                                                         | A800-9000-npu-driver\_\ *x.x.x*\ \_linux-aarch64.run       |                                  |
   +--------------------------+------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------+----------------------------------+
   |                          | Kylin OS V10SP1                                                              | 4.19.90-17.ky10.aarch64                                                                                                                                                                                                                                                                                 | A800-9000-npu-driver\_\ *x.x.x*\ \_linux-aarch64.run       |                                  |
   |                          |                                                                              |                                                                                                                                                                                                                                                                                                         |                                                            |                                  |
   |                          | Note:                                                                        |                                                                                                                                                                                                                                                                                                         |                                                            |                                  |
   |                          |                                                                              |                                                                                                                                                                                                                                                                                                         |                                                            |                                  |
   |                          | Kylin OS V10SP1 is only supported by NPU driver 21.0.rc1 and later versions. |                                                                                                                                                                                                                                                                                                         |                                                            |                                  |
   +--------------------------+------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------+----------------------------------+
   |                          | BC_Linux 7.7                                                                 | 4.19.25-203.e17.bclinux.aarch64                                                                                                                                                                                                                                                                         | A800-9000-npu-driver\_\ *x.x.x*\ \_linux-aarch64.run       |                                  |
   |                          |                                                                              |                                                                                                                                                                                                                                                                                                         |                                                            |                                  |
   |                          | Note:                                                                        |                                                                                                                                                                                                                                                                                                         |                                                            |                                  |
   |                          |                                                                              |                                                                                                                                                                                                                                                                                                         |                                                            |                                  |
   |                          | BC_Linux 7.7 is only supported by NPU driver 21.0.rc1 and later versions.    |                                                                                                                                                                                                                                                                                                         |                                                            |                                  |
   +--------------------------+------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------+----------------------------------+

**Checking the Software Package Integrity**

To prevent a software package from being maliciously tampered with during transmission or storage, download the corresponding digital signature file for integrity verification while downloading the software package.

After software packages are downloaded, verify their PGP digital signatures by following *OpenPGP Signature Verification Guide*. If the verification fails, do not use the software packages. Contact technical support.

Before a software package is used for installation or upgrade, its digital signature needs to be verified by following instructions provided in the signature verification guide to ensure that the software package is not tampered with.

For carrier users, visit `https://support.huawei.com/carrier/digitalSignatureAction <http://support.huawei.com/carrier/digitalSignatureAction>`__.

For enterprise users, visit https://support.huawei.com/enterprise/en/tool/pgp-verify-TL1000000054.
